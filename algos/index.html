
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="ie=edge" http-equiv="x-ua-compatible"/>
<meta content="Technical documentation for the Open Client Registry" name="description"/>
<link href="https://github.com/intrahealth/client-registry-docs/algos/" rel="canonical"/>
<meta content="IntraHealth" name="author"/>
<meta content="Copy to clipboard" name="lang:clipboard.copy"/>
<meta content="Copied to clipboard" name="lang:clipboard.copied"/>
<meta content="en" name="lang:search.language"/>
<meta content="True" name="lang:search.pipeline.stopwords"/>
<meta content="True" name="lang:search.pipeline.trimmer"/>
<meta content="No matching documents" name="lang:search.result.none"/>
<meta content="1 matching document" name="lang:search.result.one"/>
<meta content="# matching documents" name="lang:search.result.other"/>
<meta content="[\s\-]+" name="lang:search.tokenizer"/>
<link href="../assets/images/favicon.png" rel="shortcut icon"/>
<meta content="mkdocs-1.0.4, mkdocs-material-4.6.3" name="generator"/>
<title>Intro to Algorithms - OpenCR Documentation</title>
<link href="../assets/stylesheets/application.adb8469c.css" rel="stylesheet"/>
<link href="../assets/stylesheets/application-palette.a8b3c06d.css" rel="stylesheet"/>
<meta content="#546e7a" name="theme-color"/>
<script src="../assets/javascripts/modernizr.86422ebf.js"></script>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&amp;display=fallback" rel="stylesheet"/>
<style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
<link href="../assets/fonts/material-icons.css" rel="stylesheet"/>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="blue-grey" dir="ltr">
<svg class="md-svg">
<defs>
<svg height="448" id="__github" viewbox="0 0 416 448" width="416" xmlns="http://www.w3.org/2000/svg"><path d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z" fill="currentColor"></path></svg>
</defs>
</svg>
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
<a class="md-skip" href="#intro-to-algorithms" tabindex="0">
        Skip to content
      </a>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a aria-label="OpenCR Documentation" class="md-header-nav__button md-logo" href="https://github.com/intrahealth/client-registry-docs" title="OpenCR Documentation">
<i class="md-icon"></i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
              OpenCR Documentation
            </span>
<span class="md-header-nav__topic">
              
                Intro to Algorithms
              
            </span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text"/>
<label class="md-icon md-search__icon" for="__search"></label>
<button class="md-icon md-search__icon" data-md-component="reset" tabindex="-1" type="reset">
        
      </button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
            Type to start searching
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a class="md-source" data-md-source="github" href="https://github.com/intrahealth/client-registry-docs/" title="Go to repository">
<div class="md-source__icon">
<svg height="24" viewbox="0 0 24 24" width="24">
<use height="24" width="24" xlink:href="#__github"></use>
</svg>
</div>
<div class="md-source__repository">
    intrahealth/client-registry-docs
  </div>
</a>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container">
<nav class="md-tabs md-tabs--active" data-md-component="tabs">
<div class="md-tabs__inner md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="..">
        Welcome
      </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link md-tabs__link--active" href="../overview/">
          Overview
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../user/introduction/">
          User Manual
        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../dev/introduction/">
          Developer Manual
        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" role="main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title md-nav__title--site" for="__drawer">
<a class="md-nav__button md-logo" href="https://github.com/intrahealth/client-registry-docs" title="OpenCR Documentation">
<i class="md-icon"></i>
</a>
    OpenCR Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-source="github" href="https://github.com/intrahealth/client-registry-docs/" title="Go to repository">
<div class="md-source__icon">
<svg height="24" viewbox="0 0 24 24" width="24">
<use height="24" width="24" xlink:href="#__github"></use>
</svg>
</div>
<div class="md-source__repository">
    intrahealth/client-registry-docs
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href=".." title="Welcome">
      Welcome
    </a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-toggle md-nav__toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox"/>
<label class="md-nav__link" for="nav-2">
      Overview
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-2">
        Overview
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../overview/" title="What is OpenCR?">
      What is OpenCR?
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../process/" title="Matching process">
      Matching process
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../usecases/" title="Use Cases">
      Use Cases
    </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-toggle md-nav__toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<a class="md-nav__link md-nav__link--active" href="./" title="Intro to Algorithms">
      Intro to Algorithms
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../supported/" title="Supported Algorithms">
      Supported Algorithms
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../architecture/" title="Architecture">
      Architecture
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" id="nav-3" type="checkbox"/>
<label class="md-nav__link" for="nav-3">
      User Manual
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-3">
        User Manual
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../user/introduction/" title="Introduction">
      Introduction
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../user/process/" title="Record Linkage Process">
      Record Linkage Process
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../user/decision_rules/" title="Decision Rules">
      Decision Rules
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../user/benchmarks/" title="Matching Benchmarks">
      Matching Benchmarks
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../user/ui/" title="Admin Interface">
      Admin Interface
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../user/dashboard/" title="Dashboard">
      Dashboard
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../impl/guide/" title="OpenHIE Implementation Guide">
      OpenHIE Implementation Guide
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../impl/roles/" title="Roles and Responsibilities">
      Roles and Responsibilities
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../user/resources/" title="Additional Resources">
      Additional Resources
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" id="nav-4" type="checkbox"/>
<label class="md-nav__link" for="nav-4">
      Developer Manual
    </label>
<nav class="md-nav" data-md-component="collapsible" data-md-level="1">
<label class="md-nav__title" for="nav-4">
        Developer Manual
      </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/introduction/" title="Introduction">
      Introduction
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/internals/" title="Internals">
      Internals
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/security/" title="Security">
      Security
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/openmrs/" title="OpenMRS MPI Client">
      OpenMRS MPI Client
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/docker/" title="Installation (Docker)">
      Installation (Docker)
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/installation/" title="Installation (Lite)">
      Installation (Lite)
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/installation_full/" title="Installation (Production)">
      Installation (Production)
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/queries/" title="Example API Query (cURL)">
      Example API Query (cURL)
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/queriespy/" title="Example API Query (Python)">
      Example API Query (Python)
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/configuration/" title="Server Configuration">
      Server Configuration
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/configurebenchmarks/" title="Configure Benchmarks">
      Configure Benchmarks
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/production/" title="Production Considerations">
      Production Considerations
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/backup/" title="Backup and Recovery">
      Backup and Recovery
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/troubleshooting/" title="Troubleshooting">
      Troubleshooting
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../dev/docs/" title="Building Documentation">
      Building Documentation
    </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../contributing/" title="Contributing">
      Contributing
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../license/" title="License">
      License
    </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../about/" title="About">
      About
    </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
</nav>
</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset"><a class="md-icon md-content__icon" download href="../pdf/combined.pdf" title="PDF Export"></a>
<a class="md-icon md-content__icon" href="https://github.com/intrahealth/client-registry-docs/edit/master/docs/algos.md" title="Edit this page"></a>
<h1 id="intro-to-algorithms">Intro to Algorithms</h1>
<p>Algorithms can be deterministic, fuzzy, probabilistic, or a combination of approaches; most include some element of automatic matching plus human review. No perfect algorithm currently exists. Typically, the creator(s) of the client registry will agree on the appropriate threshold to determine a “match” and this may need to be recalibrated over time.</p>
<h2>Approaches</h2>
<p>Types of matching approaches:</p>
<ul>
<li>
<p>Deterministic. This can be thought of enforcing exact matches. This type of matching performs poorly when the quality of the data is low and/or the discriminatory power of the variable used for matching is low (e.g. sex is a poor discriminatory variable). If exact matching is enforced, the data scientist should verify that other fields also match using a combination of approaches, as needed.</p>
</li>
<li>
<p>Fuzzy. The fuzzy match method relies on converting items to their core components (e.g. phonetics) to determine matching rather than relying on probabilities. This method’s strength is addressing typing errors but remains imperfect in cases where words are similar, but are not the same (e.g. there, their). Its efficacy is unproven in most languages other than English.</p>
</li>
<li>
<p>Probabilistic. This is a method that assigns a match probability to a pair of records. The most common method (Fellegi-Sunter) checks a number of fields and sums up the probabilities that each field is a match. Higher scores indicate a match. Recent research has been directed at improving the FS method.</p>
</li>
</ul>
<p>Matching algorithms are evaluated based on their sensitivity and specificity in detecting matches. One caveat to remember is to check whether the sensitivity and specificity reported are with or without human review. Generally, it is better to minimize the chances of a false positive; however, as false positives go towards zero false negatives increase and the balance must be maintained.</p>
<h2>Types of Deterministic Matching</h2>
<p>Field-based matching. Typically fields are compared to each other across data sets and a result is a match or non-match, thus deterministic.</p>
<h2>Types of Fuzzy Matching</h2>
<p>Methods that assist in matching based on phonetic transformations to remedy spelling errors:
New York State Identification and Intelligence System (NYIIS) is a phonetic encoding of names that can assist with matching. It can only be used for English names.
Soundex indexes names by sound as pronounced in English. The Soundex encoding includes the first letter of a surname followed by 3 digits. This method relies on correctly recording the first letter of a name.
Metaphone indexes words by their English pronunciation.
Double Metaphone implements Metaphone but allows for two encodings to be returned for a word rather than constraining it to one choice. It works well with names of various origins, but the lettering must be English.
Metaphone 3 is the next generation of Double Metaphone and is a commercial product. </p>
<p>Methods that compare string similarity:
Levenshtein edit distance is a measure of the number of edits (insertions and deletions) that would be required to change one string to another.
Jaro-Winkler comparator/distance is similar to Levenshtein, but it gives more weight to strings that match on the beginning of the string. 0 is an exact match. Lower scores are better than higher scores. If the beginning of the string is misspelled, this will not work as well.
Longest common subsequence matches subsequences within strings. Subsequences do not need to match positions.</p>
<h2>Types of Probabilistic Matching</h2>
<p>The most widely used probabilistic matching method is the Fellegi-Sunter method. In this method, each field is weighted by its discriminatory power and data quality; could be manually or via model training. The algorithm checks each field and decides whether the field matches between the pairs or not. If the fields match, the weight is added to the final score. If the fields do not match, the weight is subtracted from the final score. If the sum of the weights is above a threshold, they are considered a match. Possible matches can also be produced and these would require human review.</p>
<p>One drawback is that this method assumes that no fields are correlated with each other or that they are not conditionally dependent. The assumption of conditional independence does not always hold and can lead to suboptimal results which is the biggest limitation of this method. For example, there are more women named Barbara than men named Barbara. First name and sex are not independent. </p>
<p>Extensions to the F-S method include: 
The approximate comparator extension (ACE) which includes string matching strategies prior to performing the weighting and scoring.</p>
<p>Alternatives to F-S include (see video):
GHC Scaling Algorithm (Goldstein, et al. 2017, Stats in Medicine) an order of magnitude faster than F-S. Calculates underlying weights and doesn’t rely on independence assumption.</p>
<p>Speed</p>
<p>Methods to reduce the number of comparisons and speed up the process:
Blocking. This is like sorting socks by color before trying to match them. It speeds up the process by reducing the number of pairs that need to be checked.</p>
<hr/>
<div class="md-source-date">
<small>
                      
                        Last update: February 20, 2020
                      
                    </small>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a class="md-flex md-footer-nav__link md-footer-nav__link--prev" href="../usecases/" rel="prev" title="Use Cases">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Previous
                </span>
                Use Cases
              </span>
</div>
</a>
<a class="md-flex md-footer-nav__link md-footer-nav__link--next" href="../supported/" rel="next" title="Supported Algorithms">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
                  Next
                </span>
                Supported Algorithms
              </span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
            Copyright © 2020 IntraHealth International
          </div>
        
        powered by
        <a href="https://www.mkdocs.org" rel="noopener" target="_blank">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs</a>
</div>
</div>
</div>
</footer>
</div>
<script src="../assets/javascripts/application.c33a9706.js"></script>
<script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
</body>
</html>