



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Technical documentation for the Open Client Registry">
      
      
        <link rel="canonical" href="https://github.com/intrahealth/client-registry-docs/configuration/">
      
      
        <meta name="author" content="IntraHealth">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.6.0">
    
    
      
        <title>Server Configuration - Open Client Registry</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.1b62728e.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.a8b3c06d.css">
      
      
        
        
        <meta name="theme-color" content="#546e7a">
      
    
    
      <script src="../assets/javascripts/modernizr.268332fc.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#server-configuration" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://github.com/intrahealth/client-registry-docs" title="Open Client Registry" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Open Client Registry
            </span>
            <span class="md-header-nav__topic">
              
                Server Configuration
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/intrahealth/client-registry-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    intrahealth/client-registry-docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://github.com/intrahealth/client-registry-docs" title="Open Client Registry" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Open Client Registry
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/intrahealth/client-registry-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    intrahealth/client-registry-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../get_started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../workflow/" title="Workflow" class="md-nav__link">
      Workflow
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../openmrs/" title="OpenMRS MPI Client" class="md-nav__link">
      OpenMRS MPI Client
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../docker/" title="Docker" class="md-nav__link">
      Docker
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installation/" title="Installation (Non-Production)" class="md-nav__link">
      Installation (Non-Production)
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../production/" title="Production Considerations" class="md-nav__link">
      Production Considerations
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../queries/" title="Queries" class="md-nav__link">
      Queries
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Server Configuration
      </label>
    
    <a href="./" title="Server Configuration" class="md-nav__link md-nav__link--active">
      Server Configuration
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deciding-between-a-standalone-or-mediator-configuration" class="md-nav__link">
    Deciding Between a Standalone or Mediator Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-and-privacy" class="md-nav__link">
    Security and Privacy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-services" class="md-nav__link">
    Connecting Services
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../decision_rules/" title="Decision Rules" class="md-nav__link">
      Decision Rules
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../contributing/" title="Contributing" class="md-nav__link">
      Contributing
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deciding-between-a-standalone-or-mediator-configuration" class="md-nav__link">
    Deciding Between a Standalone or Mediator Configuration
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-and-privacy" class="md-nav__link">
    Security and Privacy
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#connecting-services" class="md-nav__link">
    Connecting Services
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/intrahealth/client-registry-docs/edit/master/docs/configuration.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="server-configuration">Server Configuration<a class="headerlink" href="#server-configuration" title="Permanent link">&para;</a></h1>
<p>This Client Registry implementation is a record locator service. Often there are many records of the same person but in many people in different systems. The purpose of the Client Registry is to link patients in different systems, but not to transfer clinical records or share demographic data. </p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>The Client Registry does not store clinical information. Having the Client Registry enables the ability to create a Shared Health Record in the future.</p>
</div>
<p>The Client Registry stores the patient demographic data submitted to it in queries. The Client Registry stores demographic data at least in the HAPI FHIR Server, which can have any database backend an implementer chooses to use. </p>
<p>ElasticSearch (ES) is an optional search engine, and requires configuration. ES can also store patient data fields selectably.</p>
<p>JSON files are used to configure the system. Later iterations will support environment variables and a graphical interface. See https://github.com/openhie/client-registry/tree/master/server/config for example configuration files discussed here.</p>
<h2 id="deciding-between-a-standalone-or-mediator-configuration">Deciding Between a Standalone or Mediator Configuration<a class="headerlink" href="#deciding-between-a-standalone-or-mediator-configuration" title="Permanent link">&para;</a></h2>
<p>A central application is the Client Registry application, as distinct from the larger Client Registry platform. There are two options for running the application, as an OpenHIM mediator or as standalone application. </p>
<p>Choose running the app standalone when:</p>
<ul>
<li>For testing, demonstration, or development environments.</li>
<li>There are few clients that will connect to managing client authentication and roles will not be a burden.</li>
<li>There is no need for an additional layer of auditing.</li>
</ul>
<p>Choose running the app as a mediator when:</p>
<ul>
<li>For production. The central application should be run as a mediator registered in OpenHIM.</li>
<li>There are many clients that will need to connect.</li>
<li>There is a to audit transactions.</li>
<li>There is an existing health information exchange layer or OpenHIM.</li>
<li>One advantage of using the OpenHIM interface is the ability to change settings like the FHIR server.</li>
</ul>
<h2 id="security-and-privacy">Security and Privacy<a class="headerlink" href="#security-and-privacy" title="Permanent link">&para;</a></h2>
<p>Many configuration options relate to privacy and security. These steps are critical to address.</p>
<p>Whether in standalone or as a mediator, the Client Registry must interact only with known, trusted clients with TLS certificates. Clients must be registered and certificates assigned to them.</p>
<p>In standalone mode, the server runs TLS by default, and requires signed certificates. Client certificate needs can be turned off in OpenHIM when running as a meditiator and this feature must be regularly audited to ensure security.</p>
<h2 id="connecting-services">Connecting Services<a class="headerlink" href="#connecting-services" title="Permanent link">&para;</a></h2>
<p>The default ports are as follows:</p>
<ul>
<li><strong>3000</strong>: Standalone/mediator application</li>
<li><strong>9200</strong>: ElasticSearch</li>
<li><strong>8080</strong>: HAPI FHIR Server</li>
</ul>
<p>In <code>server/config/config_development_template.json</code> there is a template for configuration.</p>
<p><a href="https://github.com/openhie/client-registry/blob/master/server/config/config_development_template.json">Link to file</a></p>
<p>Contents of <code>server/config/config_development_template.json</code></p>
<div class="codehilite"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;app&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;port&quot;</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
    <span class="nt">&quot;installed&quot;</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">},</span>
  <span class="nt">&quot;mediator&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;api&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;root@openhim.org&quot;</span><span class="p">,</span>
      <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;openhim-password&quot;</span><span class="p">,</span>
      <span class="nt">&quot;apiURL&quot;</span><span class="p">:</span> <span class="s2">&quot;https://localhost:8080&quot;</span><span class="p">,</span>
      <span class="nt">&quot;trustSelfSigned&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;urn&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;register&quot;</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">},</span>
  <span class="nt">&quot;fhirServer&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;baseURL&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:8080/clientregistry/fhir&quot;</span><span class="p">,</span>
    <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;hapi&quot;</span><span class="p">,</span>
    <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;hapi&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;elastic&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;server&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:9200&quot;</span><span class="p">,</span>
    <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;max_compilations_rate&quot;</span><span class="p">:</span> <span class="s2">&quot;10000/1m&quot;</span><span class="p">,</span>
    <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="s2">&quot;patients&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;structureDefinition&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;reportRelationship&quot;</span><span class="p">:</span> <span class="s2">&quot;patientreport&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;matching&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;tool&quot;</span><span class="p">:</span> <span class="s2">&quot;mediator&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;systems&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;openmrs&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;http://clientregistry.org/openmrs&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;dhis2&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;http://clientregistry.org/dhis2&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;lims&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;http://clientregistry.org/lims&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;brokenMatch&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;uri&quot;</span><span class="p">:</span> <span class="s2">&quot;http://ihris.org/CR/brokenMatch&quot;</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;sync&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;lastFHIR2ESSync&quot;</span><span class="p">:</span> <span class="s2">&quot;1970-01-01T00:00:06&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;__comments&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;matching.tool&quot;</span><span class="p">:</span> <span class="s2">&quot;this tells if the app should use mediator algorithms or elasticsearch algorithms for matching, two options mediator and elasticsearch&quot;</span>
  <span class="p">}</span>
<span class="p">}</span><span class="err">```</span>

<span class="err">###</span> <span class="err">General</span> <span class="err">App</span> <span class="err">Configuration</span>

<span class="err">`app.port`</span> <span class="err">is</span> <span class="err">the</span> <span class="err">port</span> <span class="err">the</span> <span class="err">application</span> <span class="err">will</span> <span class="err">run</span> <span class="err">on.</span> 

<span class="err">`app.installed`</span> <span class="err">can</span> <span class="err">be</span> <span class="err">left</span> <span class="err">to</span> <span class="err">True.</span> <span class="err">This</span> <span class="err">tells</span> <span class="err">the</span> <span class="err">Client</span> <span class="err">Registry</span> <span class="err">to</span> <span class="err">load</span> <span class="err">structure</span> <span class="err">definitions</span> <span class="err">into</span> <span class="err">FHIR</span> <span class="err">Server,</span> <span class="err">otherwise</span> <span class="err">it</span> <span class="err">will</span> <span class="err">not.</span>

<span class="err">###</span> <span class="err">Mediator</span> <span class="err">App</span> <span class="err">Configuration</span>

<span class="err">`mediator.register`</span> <span class="err">to</span> <span class="kc">true</span> <span class="err">if</span> <span class="err">the</span> <span class="err">application</span> <span class="err">will</span> <span class="err">run</span> <span class="err">as</span> <span class="err">a</span> <span class="err">mediator.</span> <span class="err">Or,</span> <span class="err">to</span> <span class="kc">false</span> <span class="err">if</span> <span class="err">the</span> <span class="err">app</span> <span class="err">will</span> <span class="err">not</span> <span class="err">run</span> <span class="err">as</span> <span class="err">a</span> <span class="err">mediator.</span>

<span class="err">`mediator.api.xx`</span> <span class="err">settings</span> <span class="err">are</span> <span class="err">only</span> <span class="err">if</span> <span class="err">running</span> <span class="err">as</span> <span class="err">a</span> <span class="err">mediator.</span> 

<span class="err">`mediator.api.username</span> <span class="err">|</span> <span class="err">password`</span> <span class="err">must</span> <span class="err">be</span> <span class="err">different.</span> <span class="err">The</span> <span class="err">existing</span> <span class="err">settings</span> <span class="err">are</span> <span class="err">defaults</span> <span class="err">and</span> <span class="err">must</span> <span class="err">be</span> <span class="err">changed</span> <span class="err">when</span> <span class="err">configuring</span> <span class="err">the</span> <span class="err">OpenHIM.</span>

<span class="err">`mediator.api.trustSelfSigned`</span> <span class="err">should</span> <span class="err">be</span> <span class="err">set</span> <span class="err">to</span> <span class="kc">false</span> <span class="err">in</span> <span class="err">production</span> <span class="err">or</span> <span class="err">any</span> <span class="err">sensitive</span> <span class="err">environment.</span> <span class="err">True</span> <span class="err">is</span> <span class="err">only</span> <span class="err">for</span> <span class="err">demonstrations.</span>

<span class="err">###</span> <span class="err">FHIR</span> <span class="err">Server</span>

<span class="err">The</span> <span class="err">currently</span> <span class="err">supported</span> <span class="err">FHIR</span> <span class="err">version</span> <span class="err">is</span> <span class="err">R</span><span class="mi">4</span><span class="err">.</span>

<span class="err">`fhirServer.baseURL`</span> <span class="err">is</span> <span class="err">the</span> <span class="err">default.</span> <span class="err">Note</span> <span class="err">that</span> <span class="err">it</span> <span class="err">may</span> <span class="err">change</span> <span class="err">depending</span> <span class="err">on</span> <span class="err">the</span> <span class="err">way</span> <span class="err">HAPI</span> <span class="err">is</span> <span class="err">installed.</span> <span class="err">It</span> <span class="err">may,</span> <span class="err">for</span> <span class="err">example,</span> <span class="err">default</span> <span class="err">to</span> <span class="err">a</span> <span class="err">baseURL</span> <span class="err">of</span> <span class="err">http://localhost:</span><span class="mi">8080</span><span class="err">/baseR</span><span class="mi">4</span><span class="err">/.</span>

<span class="err">`fhirServer.username</span> <span class="err">|</span> <span class="err">password`</span> <span class="err">must</span> <span class="err">be</span> <span class="err">changed</span> <span class="err">from</span> <span class="err">defaults</span> <span class="err">in</span> <span class="err">HAPI.</span>


<span class="err">###</span> <span class="err">ElasticSearch</span> <span class="err">Configuration</span>

<span class="err">For</span> <span class="err">ES,</span> <span class="err">the</span> <span class="err">relationship</span> <span class="err">between</span> <span class="err">patient</span> <span class="err">resources</span> <span class="err">in</span> <span class="err">FHIR</span> <span class="err">and</span> <span class="err">what</span> <span class="err">fields</span> <span class="err">are</span> <span class="err">synchronized</span> <span class="err">in</span> <span class="err">ES</span> <span class="err">must</span> <span class="err">be</span> <span class="err">explicitly</span> <span class="err">defined.</span> <span class="err">This</span> <span class="err">is</span> <span class="err">termed</span> <span class="err">the</span> <span class="err">Report</span> <span class="err">Relationship</span> <span class="err">mapping.</span> <span class="err">One</span> <span class="err">must</span> <span class="err">define</span> <span class="err">what</span> <span class="err">resource</span> <span class="err">to</span> <span class="err">be</span> <span class="err">used</span> <span class="err">(patient)</span> <span class="err">and</span> <span class="err">what</span> <span class="err">fields</span> <span class="err">need</span> <span class="err">to</span> <span class="err">be</span> <span class="err">available</span> <span class="err">in</span> <span class="err">ES.</span> <span class="err">After</span> <span class="err">this,</span> <span class="err">the</span> <span class="err">Client</span> <span class="err">Registry</span> <span class="err">reads</span> <span class="err">these</span> <span class="err">fields,</span> <span class="err">and</span> <span class="err">populates</span> <span class="err">ES</span> <span class="err">with</span> <span class="err">the</span> <span class="err">information.</span>


<span class="err">###</span> <span class="err">OpenHIM</span> <span class="err">Mediator</span> <span class="err">JSON</span> <span class="err">Configuration</span>

<span class="err">If</span> <span class="err">using</span> <span class="err">OpenHIM,</span> <span class="err">it</span> <span class="err">must</span> <span class="err">be</span> <span class="err">configured</span> <span class="err">for</span> <span class="err">proper</span> <span class="err">clients</span> <span class="err">and</span> <span class="err">roles</span> <span class="err">to</span> <span class="err">accept</span> <span class="err">and</span> <span class="err">forward</span> <span class="err">requests</span> <span class="err">from</span> <span class="err">the</span> <span class="err">Client</span> <span class="err">Registry.</span> <span class="err">An</span> <span class="err">example</span> <span class="err">export</span> <span class="err">of</span> <span class="err">a</span> <span class="err">working</span> <span class="err">JSON</span> <span class="err">configuration</span> <span class="err">that</span> <span class="err">can</span> <span class="err">be</span> <span class="err">imported</span> <span class="err">for</span> <span class="err">development</span> <span class="err">purposes</span> <span class="err">is</span> <span class="err">available.</span>


<span class="p">[</span><span class="err">Link</span> <span class="err">to</span> <span class="err">file</span><span class="p">]</span><span class="err">(https://github.com/openhie/client-registry/blob/master/server/config/mediator.json)</span>

<span class="err">Contents</span> <span class="err">of</span> <span class="err">`server/config/mediator.json`</span>
<span class="err">```json</span>
    <span class="p">{</span>
      <span class="nt">&quot;urn&quot;</span><span class="p">:</span> <span class="s2">&quot;urn:uuid:4bc42b2f-b5a8-473d-8207-5dd5c61f0c4a&quot;</span><span class="p">,</span>
      <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;0.0.1&quot;</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Client Registry&quot;</span><span class="p">,</span>
      <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Uganda Client Registry&quot;</span><span class="p">,</span>
      <span class="nt">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;fhirServer&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;hapi&quot;</span><span class="p">,</span>
          <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;hapi&quot;</span><span class="p">,</span>
          <span class="nt">&quot;baseURL&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:8080/hapi/fhir&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;elastic&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;server&quot;</span><span class="p">:</span> <span class="s2">&quot;http://localhost:9200&quot;</span><span class="p">,</span>
          <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="nt">&quot;max_compilations_rate&quot;</span><span class="p">:</span> <span class="s2">&quot;10000/1m&quot;</span><span class="p">,</span>
          <span class="nt">&quot;index&quot;</span><span class="p">:</span> <span class="s2">&quot;patients&quot;</span>
        <span class="p">},</span>
        <span class="nt">&quot;matching&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="nt">&quot;tool&quot;</span><span class="p">:</span> <span class="s2">&quot;elasticsearch&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="nt">&quot;configDefs&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;fhirServer&quot;</span><span class="p">,</span>
        <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;FHIR Server&quot;</span><span class="p">,</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;FHIR Server Configuration Details&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;struct&quot;</span><span class="p">,</span>
        <span class="nt">&quot;template&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The base URL (e.g. http://localhost:8080/hapi/fhir)&quot;</span><span class="p">,</span>
            <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Base URL&quot;</span><span class="p">,</span>
            <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;baseURL&quot;</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Username required to access FHIR server&quot;</span><span class="p">,</span>
            <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Username&quot;</span><span class="p">,</span>
            <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;username&quot;</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span>
            <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Password required to access FHIR server&quot;</span><span class="p">,</span>
            <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Password&quot;</span><span class="p">,</span>
            <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;values&quot;</span><span class="p">:</span> <span class="p">[]</span>
      <span class="p">},</span> <span class="p">{</span>
        <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;elastic&quot;</span><span class="p">,</span>
        <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Elasticsearch Server&quot;</span><span class="p">,</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Elasticsearch Server Configuration Details&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;struct&quot;</span><span class="p">,</span>
        <span class="nt">&quot;template&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The base URL (e.g. http://localhost:9200)&quot;</span><span class="p">,</span>
            <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Base URL&quot;</span><span class="p">,</span>
            <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;server&quot;</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Username required to access elasticsearch server&quot;</span><span class="p">,</span>
            <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Username&quot;</span><span class="p">,</span>
            <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;username&quot;</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span><span class="p">,</span>
            <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Password required to access elasticsearch server&quot;</span><span class="p">,</span>
            <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Password&quot;</span><span class="p">,</span>
            <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;password&quot;</span>
          <span class="p">},</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Number of requests to compile per minute&quot;</span><span class="p">,</span>
            <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Maximum Compilations Rate&quot;</span><span class="p">,</span>
            <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;max_compilations_rate&quot;</span>
          <span class="p">},</span> <span class="p">{</span>
            <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
            <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;index to use for data storage&quot;</span><span class="p">,</span>
            <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Index Name&quot;</span><span class="p">,</span>
            <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;index&quot;</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="nt">&quot;values&quot;</span><span class="p">:</span> <span class="p">[]</span>
      <span class="p">},</span> <span class="p">{</span>
        <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;matching&quot;</span><span class="p">,</span>
        <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;FHIR Server&quot;</span><span class="p">,</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;FHIR Server Configuration Details&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;struct&quot;</span><span class="p">,</span>
        <span class="nt">&quot;template&quot;</span><span class="p">:</span> <span class="p">[{</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;option&quot;</span><span class="p">,</span>
          <span class="nt">&quot;values&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mediator&quot;</span><span class="p">,</span> <span class="s2">&quot;elasticsearch&quot;</span><span class="p">],</span>
          <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Tool to Use for Matching&quot;</span><span class="p">,</span>
          <span class="nt">&quot;displayName&quot;</span><span class="p">:</span> <span class="s2">&quot;Tool to Use for Matching&quot;</span><span class="p">,</span>
          <span class="nt">&quot;param&quot;</span><span class="p">:</span> <span class="s2">&quot;tool&quot;</span>
        <span class="p">}],</span>
        <span class="nt">&quot;values&quot;</span><span class="p">:</span> <span class="p">[]</span>
      <span class="p">}],</span>
      <span class="nt">&quot;defaultChannelConfig&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="nt">&quot;requestBody&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;responseBody&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Add Patients&quot;</span><span class="p">,</span>
        <span class="nt">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Post a new patient into the client registry&quot;</span><span class="p">,</span>
        <span class="nt">&quot;urlPattern&quot;</span><span class="p">:</span> <span class="s2">&quot;/addPatient&quot;</span><span class="p">,</span>
        <span class="nt">&quot;matchContentRegex&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;matchContentXpath&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;matchContentValue&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;matchContentJson&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;pollingSchedule&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;tcpHost&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;tcpPort&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nt">&quot;autoRetryPeriodMinutes&quot;</span><span class="p">:</span> <span class="mi">60</span><span class="p">,</span>
        <span class="nt">&quot;autoRetryEnabled&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;rewriteUrlsConfig&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;addAutoRewriteRules&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;rewriteUrls&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;enabled&quot;</span><span class="p">,</span>
        <span class="nt">&quot;alerts&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;txRerunAcl&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;txViewFullAcl&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;txViewAcl&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;properties&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;matchContentTypes&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;routes&quot;</span><span class="p">:</span> <span class="p">[{</span>
          <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Add Patient&quot;</span><span class="p">,</span>
          <span class="nt">&quot;secured&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
          <span class="nt">&quot;port&quot;</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
          <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/addPatient&quot;</span><span class="p">,</span>
          <span class="nt">&quot;pathTransform&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="nt">&quot;primary&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
          <span class="nt">&quot;forwardAuthHeader&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;enabled&quot;</span><span class="p">,</span>
          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;http&quot;</span>
        <span class="p">}],</span>
        <span class="nt">&quot;authType&quot;</span><span class="p">:</span> <span class="s2">&quot;public&quot;</span><span class="p">,</span>
        <span class="nt">&quot;whitelist&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;allow&quot;</span><span class="p">:</span> <span class="p">[],</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;http&quot;</span><span class="p">,</span>
        <span class="nt">&quot;methods&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="s2">&quot;POST&quot;</span>
        <span class="p">]</span>
      <span class="p">}],</span>
      <span class="nt">&quot;endpoints&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Activate Client Registry&quot;</span><span class="p">,</span>
        <span class="nt">&quot;host&quot;</span><span class="p">:</span> <span class="s2">&quot;localhost&quot;</span><span class="p">,</span>
        <span class="nt">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/addPatient&quot;</span><span class="p">,</span>
        <span class="nt">&quot;port&quot;</span><span class="p">:</span> <span class="mi">3000</span><span class="p">,</span>
        <span class="nt">&quot;primary&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;forwardAuthHeader&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;status&quot;</span><span class="p">:</span> <span class="s2">&quot;enabled&quot;</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;http&quot;</span>
      <span class="p">}],</span>
      <span class="nt">&quot;_uptime&quot;</span><span class="p">:</span> <span class="mf">2201.945</span><span class="p">,</span>
      <span class="nt">&quot;_lastHeartbeat&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-12-15T03:47:03.365Z&quot;</span><span class="p">,</span>
      <span class="nt">&quot;_configModifiedTS&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-12-15T02:52:49.054Z&quot;</span>
    <span class="p">}</span>
</pre></div>
                
                  
                
                
                  
                  <hr>
                  <div class="md-source-date">
                    <small>
                      
                        Last update: January 28, 2020
                      
                    </small>
                  </div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../queries/" title="Queries" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Queries
              </span>
            </div>
          </a>
        
        
          <a href="../decision_rules/" title="Decision Rules" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Decision Rules
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 IntraHealth International
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.808e90bb.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>